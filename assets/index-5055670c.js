import"./main-d20c8447.js";import{a as c}from"./axios-47b9d439.js";const h="https://teatimeapi-test.onrender.com",l=new autoComplete({selector:"#navSearchAutoComplete",data:{src:async t=>{try{return await(await fetch(`${h}/restaurants`)).json()}catch(e){return e}},keys:["storeName"]},searchEngine:"loose",resultItem:{highlight:!0},resultsList:{element:(t,e)=>{if(!e.results.length){const o=document.createElement("div");o.setAttribute("class","no_result px-8"),o.innerHTML=`<span>Found No Results for "${e.query}"</span>`,t.prepend(o)}},noResults:!0},events:{input:{selection:t=>{const e=t.detail.selection.value;l.input.value=e.storeName,console.log(e.storeName),window.location.href=`./store-order.html?UID=${e.UID}`},keydown:t=>{t.keyCode===13&&(l.input.value,console.log(selectionValue.storeName),window.location.href=`./store-order.html?UID=${selectionValue.UID}`)}}}}),u=document.querySelector(".needs-validation"),p=document.querySelector(".inputLoginAccount"),f=document.querySelector(".inputLoginPassword"),v=document.querySelectorAll(".btnLoginSubmit"),m=document.querySelectorAll(".btnLogin"),g=document.querySelectorAll(".btnUserLoggedIn"),a=document.querySelectorAll(".btnLogOut");v.forEach(t=>{t.addEventListener("click",()=>{const e=p.value,o=f.value;if(u.checkValidity()||u.classList.add("was-validated"),e==="ling-huang@fat-together.com"&&o==="ling-huang")a.forEach(n=>{n.classList.remove("d-none")}),g.forEach(n=>{n.classList.remove("d-none")}),m.forEach(n=>{n.classList.add("d-none")}),$("#accountModal").modal("hide");else{const n=document.querySelector(".invalid-feedback");n.style.display="block"}})});a.forEach(t=>{t.addEventListener("click",()=>{a.forEach(e=>{e.classList.add("d-none")}),g.forEach(e=>{e.classList.add("d-none")}),m.forEach(e=>{e.classList.remove("d-none")})})});const d="https://teatimeapi-test.onrender.com";function L(){const t=moment().add(2,"month").format("YYYY/MM"),e=moment().subtract(1,"month").format("YYYY/MM"),o=c.get(`${d}/groupings?_expand=restaurant&deadlineDateTime_gte=${e}&deadlineDateTime_lte=${t}`),n=c.get(`${d}/votings?_expand=restaurant&deadlineDateTime_gte=${e}&deadlineDateTime_lte=${t}`);let s=[];Promise.all([o,n]).then(function(i){s=s.concat(i[0].data),s=s.concat(i[1].data),D(s)}).catch(function(i){console.error(i.message)})}L();let r={};function D(t){t.forEach(e=>{r[e.UID]||(r[e.UID]={UID:e.UID,restaurantId:e.restaurantId,deadlineDateTime:e.deadlineDateTime,eventDateTime:e.eventDateTime,initiator:e.initiator,invitees:e.invitees,restaurantList:e.UID.startsWith("V")?[]:[e.restaurantName],restaurantPhoto:e.restaurant.storeCover,minGroupSize:e.restaurant.minGroupSize,currentGroupCondition:e.currentGroupCondition}),e.UID.startsWith("V")&&(r[e.UID].restaurantList.push(e.restaurantName),delete r[e.UID].currentGroupCondition,delete r[e.UID].minGroupSize)})}const E=document.querySelectorAll(".btnfilterEvent");E.forEach(t=>{t.addEventListener("click",function(){const e=this.getAttribute("data-event");b(e)})});function b(t="groupings"){t=t==="votings"?"V":"G",Object.values(r).filter(e=>e.UID.startsWith(t))}
